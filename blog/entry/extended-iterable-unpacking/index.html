<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />

    <meta property="og:type" content="website">
    <meta property="og:url" content="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;blog&#x2F;entry&#x2F;extended-iterable-unpacking&#x2F;" />

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@rfkelly">
    <meta name="twitter:site" content="@rfkelly">

    
      <meta name="twitter:title" content="Extended Iterable Unpacking">
      <title>Extended Iterable Unpacking</title>
    
    
    <link rel="icon" href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;processed_images&#x2F;866b5dbf416f778f00.png" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira Sans|Fira Mono">
    <link rel="stylesheet" href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;main.css">
     
  </head>
  <body>
    
      <header>
        <a class="profile-icon" href="/">
          <img src="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;processed_images&#x2F;866b5dbf416f778f00.png" alt="profile picture">
        </a>
        <nav>
            <a href="/about/">About</a>
            <a href="/blog/">Blog</a>
            <a href="https://github.com/rfk">GitHub</a>
            <a href="https://twitter.com/rfkelly">Twitter</a>
        </nav>
      </header>
    
    <main>
    
  <h1>Extended Iterable Unpacking</h1>
  <div class="item-meta">
    
    <div class="item-date">December 11, 2008</div>
    
      <div class="item-tags">
        [ 
        
          <a href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;tags&#x2F;software&#x2F;">software</a>
           | 
        
          <a href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;tags&#x2F;python&#x2F;">python</a>
          
        
        ]
      </div>
    
    
  </div>

  <p>If you care about these things, you probably already know: <a href="http://www.python.org/">Python 3</a> was released last week to much fanfare.  There has been some good-natured debate about the <a href="http://sayspy.blogspot.com/2008/12/whats-with-30-hatin.html">pros</a> and <a href="http://mooseyard.com/Jens/2008/12/python-30-whats-the-point/">cons</a> of switching from the 2.x series, focused mostly around the big-ticket changes like better Unicode handling (pro) and breaking compatibility with all existing Python libraries (con).  Instead, I wanted to share a small joy I've found in Python 3 that I'm already missing in Python 2: <a href="http://www.python.org/dev/peps/pep-3132/">extended iterable unpacking</a>.</p>
<span id="continue-reading"></span>
<p>In Python 2, you can automatically unpack a list/tuple/iterable into a series of variables using a single assignment statement:</p>
<pre style="background-color:#2b303b;">
<code class="language-python" data-lang="python"><span style="color:#c0c5ce;">&gt;&gt;&gt; a,b,c = [</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; </span><span style="color:#b48ead;">print </span><span style="color:#c0c5ce;">a
</span><span style="color:#d08770;">1
</span><span style="color:#c0c5ce;">&gt;&gt;&gt; </span><span style="color:#b48ead;">print </span><span style="color:#c0c5ce;">c
</span><span style="color:#d08770;">3
</span><span style="color:#c0c5ce;">&gt;&gt;&gt;
</span></code></pre>
<p>This is a very elegant technique, assuming you know how many items are in the list and want each of them in a separate variable.  But if you want to unpack only certain elements of the list, you're stuck doing the unpacking yourself.  Python's slicing syntax makes this bearable, but still pretty ugly:</p>
<pre style="background-color:#2b303b;">
<code class="language-python" data-lang="python"><span style="color:#c0c5ce;">&gt;&gt;&gt; items = [</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">4</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">5</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; start = items[</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; end = items[-</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; rest = items[</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">:-</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; </span><span style="color:#b48ead;">print </span><span style="color:#c0c5ce;">start
</span><span style="color:#d08770;">1
</span><span style="color:#c0c5ce;">&gt;&gt;&gt; </span><span style="color:#b48ead;">print </span><span style="color:#c0c5ce;">rest
[</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">, </span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">, </span><span style="color:#d08770;">4</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; 
</span></code></pre>
<p>Yuck.  But in Python 3, you can now use the starred-variable syntax familiar from function argument definitions to say &quot;put all the unmatched elements into this variable&quot;:<span id="continue-reading"></span></p>
<pre style="background-color:#2b303b;">
<code class="language-python" data-lang="python"><span style="color:#c0c5ce;">&gt;&gt;&gt; items = [</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">4</span><span style="color:#c0c5ce;">,</span><span style="color:#d08770;">5</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; start, *rest, end = items
&gt;&gt;&gt; </span><span style="color:#96b5b4;">print</span><span style="color:#c0c5ce;">(start)
</span><span style="color:#d08770;">1
</span><span style="color:#c0c5ce;">&gt;&gt;&gt; </span><span style="color:#96b5b4;">print</span><span style="color:#c0c5ce;">(rest)
[</span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">, </span><span style="color:#d08770;">3</span><span style="color:#c0c5ce;">, </span><span style="color:#d08770;">4</span><span style="color:#c0c5ce;">]
&gt;&gt;&gt; 
</span></code></pre>
<p>The ability to compress this into a clean one-liner might seem trivial, but I'm already finding it a significant win.  When writing code, it lets you express your intention directly and then get on with the business of handling the data.  When reading code, it reduces the line-noise effect of the explicit slicing and makes your intention that much easier to discern.</p>
<p>Maybe it's just my background in logic programming and resulting love for pattern-matching assignment, but this seems to be one of those features that you never think you'd use until you have opportunity to use it, and then you start seeing opportunities to use it everywhere.  Unfortunately the syntax doesn't appear to have been back-ported to Python 2.6, and since most of my projects need to stay 2.x-compatible I'm now that much worse off â€“ I'm stuck doing it the old way with explicit slicing, but I know there's something better just beyond my reach...</p>


  <hr />

  <div class="related-pages">
    <div><a href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;blog&#x2F;entry&#x2F;jquery-first-impressions&#x2F;">jQuery, first impressions</a></div>
    <div><a href="https:&#x2F;&#x2F;www.rfk.id.au&#x2F;blog&#x2F;entry&#x2F;preparing-pyenchant-for-python-3&#x2F;">Preparing PyEnchant for Python 3.0</a></div>
  </div>

    </main>
  </body>
</html>